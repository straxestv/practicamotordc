<!DOCTYPE html>
<html lang="es">
    <!-- Aqui todo el contenido de la cabecera del codigo ya sea para a침adir parametros o bibliotechas e importar scripts en el caso que sea necesario -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Motor DC - Pico W</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> <!-- Vincule boostrap para poder usar los estilos y tenga un mejor estilo la pagina-->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Se vincula el script que usaremos para el backend -->
  <style>
    body {
      background-image: url(https://i0.wp.com/elmundodeshiro.link/wp-content/uploads/2025/04/La-famosa-Vtuber-Gawr-Gura-anuncio-su-Retiro.png?w=1920&ssl=1);
      background-repeat: no-repeat; background-size: cover; background-position: center; background-attachment: fixed; font-family: Arial, sans-serif; text-align: center;
    }
    p {
      color: #C908C1;
    }
    
    h2{
     
      color: #C908C1;

    }
    </style>
</head>
<body class="bg-light">

  <div>
    <img src="https://i.pinimg.com/originals/1e/c2/50/1ec2506e6843eb55d8c21059232333b5.gif" width="280rem" height="190rem">
  </div>


  <div class="container text-center mt-4">
     <h2 class="mb-3"> Control de Motor de Corriente continua</h2>
      <p>Ajusta la velocidad del motor</p>

      <!-- Control deslizante para el motor, este te indica el porcentaje de potencia a la cual esta trabajando el motor -->
        <label for="velocidad" class="text-white bg-dark">Velocidad del Motor (%)</label>
         <input type="range" class="form-range" min="0" max="100" step="1" id="velocidad" value="0">
           <p class="text-white bg-dark">Velocidad actual: <span id="valorVelocidad">0</span>%</p>

           <!-- Medidor con Chart.js -->
        <canvas id="medidorVelocidad" width="250" height="250"></canvas>
  </div>


  <script>
    const slider = document.getElementById("velocidad");
    const valorTexto = document.getElementById("valorVelocidad");

    // Configuraci칩n del medidor (tipo "doughnut")
    const ctx = document.getElementById("medidorVelocidad").getContext("2d");
    const medidor = new Chart(ctx, {
      type: "doughnut",
      data: {
        labels: ["Velocidad", "Resto"],
        datasets: [{
          data: [0, 100],
          backgroundColor: ["#0d6efd", "#e9ecef"],
          borderWidth: 1
        }]
      },
      options: {
        rotation: -90,
        circumference: 180,
        cutout: "70%",
        plugins: { legend: { display: false } }
      }
    });

    // Funci칩n para actualizar valores

    slider.addEventListener("input", () => {
      const valor = slider.value;
      valorTexto.textContent = valor;

      // Actualizar gr치fico

      medidor.data.datasets[0].data[0] = valor;
      medidor.data.datasets[0].data[1] = 100 - valor;
      medidor.update();

      // Enviar al servidor (Pico W)
      
      fetch(`/set?velocidad=${valor}`)
        .catch(err => console.error("Error al enviar:", err));
    });
  </script>

</body>
</html>


<!-- Godos Marcial Eddie Ramferi-->
